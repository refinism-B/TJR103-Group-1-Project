# TJR103 雲端資料工程師班 第一組專題：寵物資訊站

## 前言

台灣出生率逐年下降，毛小孩的數量卻不斷攀升，足見寵物在人們心中的重要性逐漸增加，甚至已是家中重要的成員之一。隨之而來的就是寵物產業的蓬勃發展，然而目前關於這些**店家的資訊仍相當分散**，飼主或使用者只能自行上網搜尋，**缺乏集中資訊的平台**，當然**也沒有較完整的紀錄**。這正是本專題嘗試解決的問題。

## 研究動機

在本小組中有一些組員本身就是飼主，也有好友是飼主的情形。本專題的研究動機是從自身的經驗出發，並從宏觀的角度嘗試解答幾個問題：

1. **站在飼主的角度**：在台灣的縣市中，哪裡的寵物資源最豐富？
2. **站在業者的角度**：在台灣的縣市中，哪個地區的寵物商業潛力更多？
3. 是否有可能建立一個**寵物資源匯集平台**？讓使用者能夠集中查詢相關的資源及資訊。

## 作法與策略

本專題遵循以下幾個前提或框架：

1. **以六都為研究對象**：基於時間和資源考量，在課程時間內可能難以完成全台灣的資料蒐集。所以我們將目標放在六都，最小行政單位為「**區**」。六都是人口及資源最集中的區域，能最大化涵蓋可能的使用者，且以六都為主較能看出明顯的差異及效果。
2. **店家分類**：將店家分為「**寵物用品**」、「**寵物餐廳**」、「**寵物美容**」、「**寵物旅館**」、「**寵物醫院**」、「**寵物收容所**」等六大類，是目前最常見的寵物相關店家，也與飼養寵物息息相關。

專題具體的作法可大致分為下列幾個步驟：

1. **收集資料**：蒐集各地區的寵物店家資訊，以及各地區每日寵物登記數資料。
2. **分析評比**：將蒐集到的店家資訊，以區為單位，根據公式計算出便利性指標及商業潛力指標。便可做區與區之間的比較。
3. **展示資訊**：將蒐集到的店家資訊，按照類別和地區分類，透過視覺化的方式呈現，讓使用者可以根據需要進行查詢。

## 專案介紹

### 資料來源
- 寵物登記數資料：來自[農業部寵物登記管理資訊網](https://www.pet.gov.tw/Web/O302.aspx)，為每日更新的寵物登記資料。
- 公立收容所資料：來自[動物保護資訊網](https://animal.moa.gov.tw/Frontend/PublicShelter)的收容所查詢資料。
- 人口、行政區面積資料：來自內政部戶政司。
- 寵物醫院資料：來自[農業部動植物防疫檢疫署](https://ahis9.aphia.gov.tw/Veter/OD/HLIndex.aspx)的全國獸醫師執業、診療機構開業查詢。
- 其他類店家資料：使用google map搜尋服務取得。

### 資料蒐集
- 主要使用python的爬蟲套件：**requests、beautifulsoup、selenium**等，自動化蒐集、更新資料。
- 店家資料則是透過google提供的google maps API資源，分成兩步驟搜尋：
    1. 使用「**nearby search**」的方式，搜尋六都範圍內的所有店家。這種方式讓使用者可以**設定一經緯度為中心，並搜尋一定半徑內符合關鍵字的地標資訊**。首先需取得六都地理邊界資料（來自[內政部國土測繪中心](https://whgis-nlsc.moi.gov.tw/Opendata/Files.aspx)）並根據設定的搜尋半徑，計算出在範圍內的**所有經緯度座標點**。再透過程式自動化的、逐個座標點進行nearby search，並將搜尋到的結果記錄下來。
    2. 將步驟1取得的店家資訊去除重複值後，再根據店家的**place id**（google賦予google map上每個地標的唯一id）使用google map的**place API服務**進行精準查詢，蒐集店家的**詳細資訊（包含營業時間、用戶評分、評論數、網址等）**。
    