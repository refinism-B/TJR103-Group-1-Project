# TJR103 雲端資料工程師班 第一組專題：寵物資訊站

## 專案概要

本專題針對台灣六都寵物資源進行資料蒐集與分析，建立一個**寵物資訊匯集平台**，幫助飼主與業者了解各區域寵物資源分布及商業潛力。專案成果包含**自動化資料管線**、**GCS資料存放**、**BigQuery查詢**，並透過視覺化呈現分析結果。

## 研究動機

本專題嘗試解答幾個問題：

1. **飼主角度**：展示六都各地寵物資源數比較。
2. **業者角度**：分析六都各地區的商業潛力比較。
3. 建立一個**寵物資源匯集平台**，讓使用者能夠集中查詢寵物資源及資訊。

## 研究前提

1. **以六都為研究對象**：基於時間和資源考量，我們將目標放在六都，最小行政單位為「**區**」。六都是人口及資源最集中的區域，能最大化涵蓋可能的使用者。
2. **店家分類**：將店家分為「**寵物用品**」、「**寵物餐廳**」、「**寵物美容**」、「**寵物旅館**」、「**寵物醫院**」、「**寵物收容所**」等六大類，是目前最常見的寵物業店家。

## 技術架構與流程

1. **資料蒐集**：使用**python爬蟲套件**及**google maps API服務**蒐集各地店家資訊。
2. **ETL處理**：透過**pandas**清理、轉換，剔除無效資料，並轉換成可用的格式或型別。
3. **data pipeline自動化**：在GCP雲服務中建立VM，並部署容器化**Airflow**，透過DAG自動化管理、排程資料管線。完成的資料檔案上傳至**GCS**存檔。
4. **資料查詢與分析**：使用GCP上的**BigQuery服務**，直接連結GCS中的檔案建立外部資料表進行查詢。
5. **視覺化與成果展示**：使用**Tableau**製作視覺化報表及Dashboard，讓使用者輕鬆操作取得資料。

## 資料來源
| 資料類別       | 資料來源                                               |
| -------------- | ------------------------------------------------------ |
| 寵物登記數     | [農業部寵物登記管理資訊網-登記狀況](https://www.pet.gov.tw/Web/O302.aspx) |
| 公立收容所     | [動物保護資訊網](https://animal.moa.gov.tw/Frontend/PublicShelter) |
| 人口與行政區   | 內政部戶政司                                           |
| 寵物醫院       | [農業部動植物防疫檢疫署](https://ahis9.aphia.gov.tw/Veter/OD/HLIndex.aspx) |
|寵物旅館|[農業部寵物登記管理資訊網-合法寵物業者名單](https://www.pet.gov.tw/Web/BusinessList.aspx)|
| 其他店家       | Google Maps API                                        |


## 技術挑戰與解決方案

- **店家資訊蒐集**：網上缺乏集中相關資料的平台或資源，或是由個人收集但無法保證更新頻率、資料品質等，故最後決定以google maps來蒐集店家資訊與資料，來確保資料可信度。
    - **優點**：資料格式固定、具有明確地理資訊、店家或使用者可即時更新、也是大部分使用者搜尋時的主要工具。
    - **缺點**：大量使用google maps API服務會造成額外成本（後述）。

- **大量google API查詢**：google提供每個帳號每月有免費查詢次數，免費額度用罄後便會另外計費。在短期內可由GCP免費試用額度來cover，若要長期經營則需進行成本控管。
    - 考量店家資訊變動頻率不高，設定店家資料更新頻率為**每月更新**。
    - 在每次更新時紀錄**搜尋半徑**、**步長**、**搜尋座標數**以及**資料筆數**，可估算每次更新的花費，並適時調整下次更新時的設定，以達到成本控制。
    - 在搜尋詳細資料前，先透過**經緯度定位**將不在六都範圍內的資料剔除，減少無意義的搜尋次數。

- **data pipeline自動化**：


## 指標計算與資料視覺化